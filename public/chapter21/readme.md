# 미디어와 그래픽 스크립팅

- 클라이언트 측 그래픽 드로잉을 위한 강력한 두 가지 기술을 다룬다.
- 브라우저가 동적으로 정교한 그래픽을 만들어 내는 이 기능은 다음 몇가지 이유 때문에 중요하다.!!!
- 1 ) 클라이언트 측에서 생산한 그래픽에 사용된 코드는 일반적으로 이미지 자체의 크기보다 훨씬 작다.  
즉, 네트워크 대역폭을 상당히 절약할 수 있다.
- 2 ) 실시간 데이터를 사용하여 동적으로 그래픽을 생성하려면 CPU자원을 많이 사용한다.  
클라이언트에 이 작업을 맡김으로 인해 서버의 부하를 줄여서, 잠재적으로 하드웨어 비용을 절약한다.
- 클라이언트에서 그래픽을 생성한다면, 서버는 데이터를 제공하고 클라이언트는 데이터의 표현을 관리한다는  
현대적인 웹 애플리케이션 구조와 일치한다.

#### 이미지 스크립팅
- <img> 요소 사용
- 이미지는 즉각 반응해야해.
- 즉, 필요한 이미지가 브라우저 캐시에 '이미' 존재함을 보장할 필요가 있지!!
- 클라이언트 측 JS에서 이럴때 사용하기 위한 API가 존재한다.
- 이미지를 강제로 캐싱하기 위해, Image() 생성자를 사용하여 보이지 않는 화면 영역에 이미지 객체를 만들수있다.
- 그런다음, 캐싱할 이미지 URL을 이 객체의 src 프로퍼티에 설정해서 해당 객체에 이미지를 불러온다.
- 이 이미지는 문서(DOM)에 추가되지는 않으므로, 눈에 보이지 않음.
- 그럼에도 불구하고 브라우저는 이미지 데이터를 로드하고 캐시해둔다!
- 나중에 동일한 URL을 화면상의 이미지에 사용하면, 네트워크를 통하지 않고 브라우저의 캐시에서 불러올수있다.
- roll over이미지 캐시하기 (document.images해서 for문돌리면서 new Image().src=img.dataset.rollover 이미지 캐싱해준다.)

#### 오디오와 비디오 스크립팅
- <audio>, <vidio> 요소 사용
- HTML5를 지원하는 브라우저에서는 HTML문서에 소리나 영상을 포함하기 위해 플래시 같은 플러그인을 더이상 사용할 필요가 없다.
- but, 브라우저 제조사들이 오디오, 비디오 표준 코덱을 모두 지원하는데 동의하지 않아서, 결국 <source> 요소 사용

<audio>
<source src="music.mp3" type="audio/mpeg">
<source src="music.ogg" type='audio/ogg; codec="vorbis"'>
</audio>

- <source> 문서 요소는 내용물이 없다. 닫는 태그인 </source>가 없으며 끝부분에 '/>'할 필요도없음.
- <audio>와 <video>문서 요소를 지원하는 브라우저는 이 document element 안의 내용을 렌더링하지 않는다.
- but, 지원하지 않는 브라우저에서는 해당 내용을 렌더링해 버리므로, 플래시 플로그인을 호출하는 <object> 문서 요소와 같은 폴백을 내부에 삽입할수도있다.

<video id="news" width=640 height=480 controls preload>
	<!-- 파이어폭스와 크롬을 위한 WebM포맷 -->
	<source src="news.webm" type='video/webm; codecs="vp8, vorbis"'>

	<!-- IE와 사파리를 위한 H.264 포맷 -->
	<source src="news.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'>

	<!-- 플래시 플러그인 폴백 -->
	<object width=640 height=480 type="application/x-shocwave-flash" data="flash_movie_player.swf">
	
	<!-- 사용할 플래시 영상의 설정을 위한 param문서 요소를 이곳에 둔다. -->
	<!-- 텍스트는 최후의 폴백 내용물이다. -->
	<div>video 문서 요소가 지원되지 않으며, 플래시 플러그인이 설치되어 있지 않습니다.</div>

</video>

- <video>, <audio>는 본질적으로 동일한 API 공유
- <video>요소에는 width, height 프로퍼티가 존재해!!!
- 화면에서 <audio>가 보이지 않지만 new Audio("chime.wav").play(); // 음향 효과를 불러와서 재생한다.
- canPlayType() 프로퍼티를 사용하여 미디어의 MIME타입 체크하여 재생할 수 있는지 테스트할수있다.  
해당 미디어 타입이 재생할 수 없으면 빈 문자열(부정값)을 반환. 재생이 가능하다면, 'maybe' or 'probably'반환.

##### 미디어 재생 장치 제어하기
- 재생 시작 : play()
- 재생 중단 : pause()
- 미디어 건너뛰거나 탐색할 때 : currentTime()
- volume 프로퍼티 : 0과 1사이의 숫자 값으로 재생 음량을 지정
- 재생장치 음소거하려면 muted = true 지정
- playbackRate 프로퍼티 : 미디어 속도 지정(표준1, 1보다 크면 빨라지고 , 0~1사이이면 느려진다.)
- controls : 브라우저에 재생 제어 장치의 출력 여부 명시 (true/false)
- loop : 미디어를 반복적으로 재생(true)할지, 마지막에 도달하면 재생을 끝낼지(false)
- preload : 미디어의 내용을 사용자가 재생하기 전에 미리 불러올지, 불러온다면 얼마나 많이 불러올지 지정.  
'none'으로 지정하면 미리 불러오는 데이터가 없다는 의미.  
'metadata'이면 재생 시간, 비트레이트, 프레임 크기 같은 메타 데이터가 로드되어야 한다는 의미.  
'auto'이면 브라우저는 적절한 크기의 미디어를 미리 불러들어야 한다.
- preload속성을 지정하지 않는다면 대체로 메타 데이터를 로드한다.
- autoplay : 미디어가 충분히 다운로드되면 자동으로 재생을 시작해야하는지 지정. 
값이 true이면 미디어 데이터를 브라우저가 미리 불러와야 함을 암시.

#### SVG (Scalable Vector Graphics)
- 그래픽을 묘사하는 XML기반 언어
- JS와 DOM을 사용하여 생성하고 조작가능.

#### <canvas> 그래픽